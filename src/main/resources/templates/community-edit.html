<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>게시글 수정</title>
    <link rel="stylesheet" th:href="@{/css/community-edit.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/nav.css}">
</head>

<body>
    <div th:replace="~{nav :: global-nav}"></div>

    <div class="community-layout">
        <div class="community-detail">
            <h2>게시글 수정</h2>
            <form th:action="@{/community/edit/{id}(id=${communityDto.id})}" method="post" th:object="${communityDto}">
                <div>
                    <label for="category">카테고리 :</label>
                    <select id="category" th:field="*{category}">
                        <option value="자유">자유</option>
                        <option value="모집">모집</option>
                        <option value="후기">후기</option>
                        <option value="공략">공략</option>
                    </select>
                </div>
                <div>
                    <label for="title">제목 :</label>
                    <input type="text" id="title" th:field="*{title}" required maxlength="50">
                </div>
                <div>
                    <label for="description">내용 :</label>
                    <textarea id="description" th:field="*{description}" required maxlength="4000" oninput="updateCharacterCount()"></textarea>
                    <span id="charCount">0 / 4000자</span> <!-- 문자 수 표시 -->
                </div>
                <div>
                    <button type="submit">수정하기</button>
                    <button type="button"
                        th:onclick="'window.location.href=\'' + @{/community/{id}(id=${communityDto.id})} + '\''">취소</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function updateCharacterCount() {
            const textarea = document.getElementById('description');
            const charCount = document.getElementById('charCount');
            const maxLength = 4000;

            const currentLength = textarea.value.length;
            charCount.textContent = `${currentLength} / ${maxLength}자`;

            if (currentLength >= maxLength) {
                charCount.style.color = 'red';
            } else {
                charCount.style.color = 'white';
            }
        }

        document.addEventListener("DOMContentLoaded", updateCharacterCount);
    </script>
</body>

</html>