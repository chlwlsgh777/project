<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>관리자 대시보드</title>
</head>
<link rel="stylesheet" th:href="@{/css/main.css}">
<link rel="stylesheet" th:href="@{/css/nav.css}">

<body>
    <div th:replace="~{nav :: global-nav}"></div>
    <h1>관리자 대시보드</h1>
    <p>총 사용자 수: <span th:text="${userCount}"></span></p>
    <p>총 게임 수: <span th:text="${gameCount}"></span></p>
    <p>총 쿠폰 수: <span th:text="${couponCount}"></span></p>
    <ul>
        <li><a href="/admin/users">사용자 관리</a></li>
        <li><a href="/admin/games">게임 관리</a></li>
        <li><a href="/admin/coupons">쿠폰 관리</a></li>
    </ul>

    <div sec:authorize="hasRole('ADMIN')">
        <h1>쿠폰 생성</h1>
        <form th:action="@{/admin/coupons/create}" method="post">
            <div>
                <label for="code">쿠폰 코드:</label>
                <input type="text" id="code" name="code" required>
            </div>
            <div>
                <label for="discountPercent">할인 비율 (%):</label>
                <input type="number" id="discountPercent" name="discountPercent" min="0" max="100" step="0.1" required>
            </div>
            <div>
                <label for="expirationDate">만료일:</label>
                <input type="date" id="expirationDate" name="expirationDate" required>
            </div>
            <div>
                <label for="gameId">게임:</label>
                <select id="gameId" name="gameId" required>
                    <option th:each="game : ${games}" th:value="${game.id}" th:text="${game.name}"></option>
                </select>
            </div>
            <button type="submit">쿠폰 생성</button>
        </form>
    </div>
    <div sec:authorize="!hasRole('ADMIN')">
        <h1>접근 권한이 없습니다</h1>
        <p>이 페이지는 관리자만 접근할 수 있습니다.</p>
    </div>
</body>

</html>