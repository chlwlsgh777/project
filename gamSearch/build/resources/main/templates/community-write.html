<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>글쓰기</title>
    <link rel="stylesheet" th:href="@{/css/community.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/nav.css}">
</head>

<body>
    <div th:replace="~{nav :: global-nav}"></div>

    <div class="community-layout">
        <h2>새 글 작성</h2>
        <form th:action="@{/community/write}" method="post" th:object="${community}">
            <div>
                <label for="category">카테고리:</label>
                <select id="category" th:field="*{category}">
                    <option value="자유">자유</option>
                    <option value="모집">모집</option>
                    <option value="후기">후기</option>
                    <option value="공략">공략</option>
                </select>
            </div>
            <div>
                <label for="title">제목:</label>
                <input type="text" id="title" th:field="*{title}" required>
            </div>
            <div>
                <label for="description">내용:</label>
                <textarea id="description" th:field="*{description}" required></textarea>
            </div>
            <button type="submit">글 작성</button>

            <a href="#" onclick="goBack(); return false;">돌아가기</a>
        </form>
    </div>
</body>

<script>
    function goBack() {
        var returnUrl = sessionStorage.getItem('communityReturnUrl');
        if (returnUrl) {
            window.location.href = returnUrl;
            sessionStorage.removeItem('communityReturnUrl');
        } else {
            // 브라우저 히스토리에 이전 페이지가 있는 경우
            if (document.referrer.indexOf(window.location.host) !== -1) {
                history.back();
            } else {
                // 이전 페이지가 없는 경우 (예: 직접 URL을 통해 접근한 경우)
                window.location.href = '/community';
            }
        }
    }
</script>

</html>